const tracks = [
    {
      "id": "3AhXZa8sUQht0UEdBJgpGc",
      "name": "Like a Rolling Stone",
      "preview_url": "https://p.scdn.co/mp3-preview/f0eec1a1dbd31bf51cf323d2981535ec4fc5a568?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b273540a241e3001ddc276b9ab93"
    },
    {
      "id": "6HSXNV0b4M4cLJ7ljgVVeh",
      "name": "Knockin' On Heaven's Door",
      "preview_url": "https://p.scdn.co/mp3-preview/5d590e2139ce4eb119238968a8b398e8510a6251?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2736c86683d20c72e3874c11c6d"
    },
    {
      "id": "1lqMLr9Wj7SM2F9AikGcxN",
      "name": "Hurricane",
      "preview_url": "https://p.scdn.co/mp3-preview/2e948dc73d7c3737b6cc97e1d87a23566020536f?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2738e1a23e42f68260b7b274e09"
    },
    {
      "id": "52vA3CYKZqZVdQnzRrdZt6",
      "name": "The Times They Are A-Changin'",
      "preview_url": "https://p.scdn.co/mp3-preview/0ba5cc92d57c040ed8da5821cc68a1740ded6728?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2733b812eed53f0d7e134fe446e"
    },
    {
      "id": "2WOjLF83vqjit2Zh4B69V3",
      "name": "Don't Think Twice, It's All Right",
      "preview_url": "https://p.scdn.co/mp3-preview/bd9315a5b98d2a824c3a97923f7e3476ba48f783?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2737d214af8499aa95ad220f573"
    },
    {
      "id": "18GiV1BaXzPVYpp9rmOg0E",
      "name": "Blowin' in the Wind",
      "preview_url": "https://p.scdn.co/mp3-preview/fc1dd43539f9fbdaa17a4b012d61d50864e6f1fa?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2737d214af8499aa95ad220f573"
    },
    {
      "id": "4K1imZQQ0yKtJ40vGmUajS",
      "name": "Girl from the North Country",
      "preview_url": "https://p.scdn.co/mp3-preview/ef6d7428a8d62408825df6bf65f8ee4c8619af91?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b27322debe1325cc21c9bb0c0b07"
    },
    {
      "id": "3y4Uza6K58JXQ7RYya8ZI5",
      "name": "Shelter from the Storm",
      "preview_url": "https://p.scdn.co/mp3-preview/6601fd00ff0932b7339e24def875754c26447aef?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b27372ca15b8637acbc7d15ff5ba"
    },
    {
      "id": "4uYwlMp841PLJmj1gJJwIq",
      "name": "Lay, Lady, Lay",
      "preview_url": "https://p.scdn.co/mp3-preview/5dcc3e298d65fb8ea7bcfb782d0055e7c3af613d?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b27322debe1325cc21c9bb0c0b07"
    },
    {
      "id": "3RkQ3UwOyPqpIiIvGVewuU",
      "name": "Mr. Tambourine Man",
      "preview_url": "https://p.scdn.co/mp3-preview/f4270fc48011ef0864a7c32a889d641579dba929?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2736960c5f4eb72f0c06aa92181"
    },
    {
      "id": "7xRemq7GLu0Tbqe9OckG87",
      "name": "The Man in Me",
      "preview_url": "https://p.scdn.co/mp3-preview/76995cc0437ba19a0fd830d16e1724f67c99f6b1?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b273be634898c4b925ad6611ac64"
    },
    {
      "id": "0dRQDSgpobhDk7IuOBy8GJ",
      "name": "Bob Dylan",
      "preview_url": "https://p.scdn.co/mp3-preview/4c51f8cfa07dd62182e272dab9aa4e0125a14ddf?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2732dfa7761d4918777330d9794"
    },
    {
      "id": "6k9DUKMJpWvu6eFG3O64Lg",
      "name": "Subterranean Homesick Blues",
      "preview_url": "https://p.scdn.co/mp3-preview/35f11ac91a313d32a6fbffb9564035d8fd9a9299?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2736960c5f4eb72f0c06aa92181"
    },
    {
      "id": "7ny2ATvjtKszCpLpfsGnVQ",
      "name": "A Hard Rain's A-Gonna Fall",
      "preview_url": "https://p.scdn.co/mp3-preview/a1a6d38ef506f754baef60effe6920bb04d6783e?cid=9697a3a271d24deea38f8b7fbfa0e13c",
      "image_url": "https://i.scdn.co/image/ab67616d0000b2737d214af8499aa95ad220f573"
    }
];

let i = 0;
for (const track of tracks) {
    const template = `
        <div data-index="${i}" onclick="playSong(event);">
            <img src="${track.image_url}" />
            <h2>${track.name}</h2>
        </div>`;
    document.querySelector('main').innerHTML += template;
    i += 1;
}

const playSong = ev => {
    console.log(ev.currentTarget.dataset.index);
    const idx = Number(ev.currentTarget.dataset.index);
    console.log(tracks[idx].preview_url);
    document.querySelector('#audio-source').src = tracks[idx].preview_url;
    
    const audio = document.querySelector('audio');
    audio.load();
    audio.play();
};